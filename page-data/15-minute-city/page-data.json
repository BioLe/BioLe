{"componentChunkName":"component---src-templates-works-work-js","path":"/15-minute-city/","result":{"data":{"site":{"siteMetadata":{"title":"Leonardo Melo"}},"markdownRemark":{"id":"c415b8d3-bf85-5321-b5cb-e2adf35dc46a","excerpt":"Introduction The 15-Minute City concept thinks of cities as hubs where most people, if not all, are able to tend their needs within a short…","rawMarkdownBody":"\r\n# Introduction\r\n\r\nThe 15-Minute City concept thinks of cities as hubs where most people, if not all, are able to tend their needs within a short walk or bike ride from their home. For this, six social functions have been considered as minimum requirements: home, work, commerce, healthcare, education, and entertainment.\r\n\r\nThe application tries to help the user find a new home, conjugating his needs with the concept requirements.\r\n\r\n# Architecture\r\n\r\n![test](/imgs/arc_overview.png)\r\n\r\nThe development was split into three important sections: data gathering, a microservice backend and a frontend.\r\n\r\n## Data Gathering\r\n\r\nTo obtain the data to sustain the application, it required scraping of real estate agencies websites (e.g., [remax](https://www.remax.pt/)) and real estate aggregators (e.g., [imovirtual](https://www.imovirtual.com/)). Also, to allow for an easier expansion all of the components of the extraction were split into multiple jobs, all hosted in different [Kubernetes](https://kubernetes.io/) pods.\r\n\r\n![test](/imgs/Arq_Scraping_Fixed.png)\r\n\r\nThis way, we have dedicated machines gathering listing URLs and sending them to a queue waiting to be requested. The URLs are then read, data is extracted via XPATH and stored in a new queue. In the last phase, the listings are validated, processed, and stored in an SQL database.\r\n\r\n## Backend\r\n\r\nThe backend is split into multiple microservices which communicate with the exterior via REST or between themselves via Kafka.\r\n\r\n1. **Auth** -- Responsible for authentication of the user with the platform, also responsible for the management of API keys to access the API Gateway.\r\n2. **User** -- Managing user information.\r\n3. **Metrics** -- The index that quantifies the relation between the user needs and the 15-minute city concept.\r\n4. **Parameter** -- Responsible for storing information related to points of interest of the multiple locations (e.g., gardens, hospitals, cinema).\r\n5. **Search** -- Logic behind the search bar, it uses Elastic Search for faster text retrieval.\r\n6. **Estate** -- Deals with all the estate information scraped in the previous step, as such, it shares the same database. \r\n\r\n![test](/imgs/Tese_Scrapper-Arq. Artigo.png)\r\n\r\nTo ensure that wellbeing of the services and guarantee a great user experience, all the services expose metrics constantly scraped by [Prometheus](https://prometheus.io/) and monitored in [Grafana](https://grafana.com/).\r\n\r\n![test](/imgs/grafana-dashboard.png)\r\n\r\n## Frontend\r\n\r\nThe frontend was created with [ReactJS](https://reactjs.org/), and is **still under development**. Currently the product page displays information about the chosen location, such as: type (municipality, parish, city, NUT), average price, index value according to the 15 minute city concept.\r\n\r\nThe second section displays all the available estates in the chosen location. And finally, some information about the estates present in the area: most common features and bedrooms per house (the portuguese way of listing estates).\r\n\r\n![test](/imgs/ui_placeholder_2.png)\r\n\r\n\r\n\r\n","html":"<h1>Introduction</h1>\n<p>The 15-Minute City concept thinks of cities as hubs where most people, if not all, are able to tend their needs within a short walk or bike ride from their home. For this, six social functions have been considered as minimum requirements: home, work, commerce, healthcare, education, and entertainment.</p>\n<p>The application tries to help the user find a new home, conjugating his needs with the concept requirements.</p>\n<h1>Architecture</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/LeonardoMelo/static/2288f9b4a56c6be2ea58221b02c3d2e0/0e89d/arc_overview.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABoUlEQVQoz3VS227bMAz17/dhL3vdBwzYDX3Z+pChQDes2DIM6NICSxcsSetLbEm2LNnyRSKl0cmKFUVLSIRA8vCAh4rCnSF6AA/o6T0MY5pmSZpXUiMGB1MK96n7FrWmZcVOqRr24FqPcSqktoMNomoYl6p1hCdgP8A/vMeS5UNnIq2b+cWyKDgFCV+pMSsaIce2g6xQya4qa2ud70c0nSMPzp0tbt9++fN+vonON3h0Ft5deksEGITsb2Im5KANxpncxJwajTaUUm/Wq1p3NNGL2fLoJH72YRUdX8Krq/DywisDRJ5zE2fVjrdNh4Voc95UytLMpreq6YkcAGbnP1/P5sen36NFCs8/48drRJiY46xerpKbtG4MZkxTIy6tc+hp5hG8P2jmDyeiWzUAGCjh9mofRCFtRjvVUsQBEp78Q7UdBM4V4+r/zsAn0jJtPYYt62RjwxMWJbx9c/Lp1/UaJzacCAdYZGYtaBfj6VValOZJcFX3v7ecVZ2/+wK0zyTJRamYUF+//UgzNk3p/SNgWuJ2c8u5uB8lfR4rfmh/AWm0cv4Q+KVmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"test\"\n        title=\"test\"\n        src=\"/LeonardoMelo/static/2288f9b4a56c6be2ea58221b02c3d2e0/fcda8/arc_overview.png\"\n        srcset=\"/LeonardoMelo/static/2288f9b4a56c6be2ea58221b02c3d2e0/12f09/arc_overview.png 148w,\n/LeonardoMelo/static/2288f9b4a56c6be2ea58221b02c3d2e0/e4a3f/arc_overview.png 295w,\n/LeonardoMelo/static/2288f9b4a56c6be2ea58221b02c3d2e0/fcda8/arc_overview.png 590w,\n/LeonardoMelo/static/2288f9b4a56c6be2ea58221b02c3d2e0/efc66/arc_overview.png 885w,\n/LeonardoMelo/static/2288f9b4a56c6be2ea58221b02c3d2e0/c83ae/arc_overview.png 1180w,\n/LeonardoMelo/static/2288f9b4a56c6be2ea58221b02c3d2e0/0e89d/arc_overview.png 3058w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>The development was split into three important sections: data gathering, a microservice backend and a frontend.</p>\n<h2>Data Gathering</h2>\n<p>To obtain the data to sustain the application, it required scraping of real estate agencies websites (e.g., <a href=\"https://www.remax.pt/\">remax</a>) and real estate aggregators (e.g., <a href=\"https://www.imovirtual.com/\">imovirtual</a>). Also, to allow for an easier expansion all of the components of the extraction were split into multiple jobs, all hosted in different <a href=\"https://kubernetes.io/\">Kubernetes</a> pods.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 561px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/LeonardoMelo/static/aa4a59364e4265634f6377f361567450/410f3/Arq_Scraping_Fixed.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.189189189189186%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABc0lEQVQoz22QWY7cMAxEff/L5Cc5R4ABsox73NPe5EVty5Ysa/FSoTRw5iMhQEAL+VjFZF42qMWjqHo88gb3B4NcHCa14Tk55GWPNKtwoyxrDiE3jLOH8wcW7TAKBTFpGLdD6Q3JpHw81O1IzR0KapqkxUzA9mnw9t7invOY2aMH61eCeoRYV4OmadH1nG4nVrMjCTDrT3RcILuXaNoB2mxY1h1cWPy+lfj+kuLlR4ZfaU7AJaoUs8MgTIQrfSA4DcqT8wSO44wTnfPYth3GGJznx5uUCg1j6LsOmhRdcRw7rDWkUoOxGt5/qE6uggBY15WgLuYVSkncGe2XMjSHGiklAQ8Mw4CStRjH8RMYQJcarXUsFEKgrmssAVbU+PJzwtdU0jraCOGcU+2C5yhw6w3SRsIa86nwAlprowKlVGwyNKDqOAEFvhEw/P11RIM13YvB4pXNcU3/WP5fhMLX7IG8aqLly1FIQVbT2xuKsopiQvwB+19lFzVItsAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"test\"\n        title=\"test\"\n        src=\"/LeonardoMelo/static/aa4a59364e4265634f6377f361567450/410f3/Arq_Scraping_Fixed.png\"\n        srcset=\"/LeonardoMelo/static/aa4a59364e4265634f6377f361567450/12f09/Arq_Scraping_Fixed.png 148w,\n/LeonardoMelo/static/aa4a59364e4265634f6377f361567450/e4a3f/Arq_Scraping_Fixed.png 295w,\n/LeonardoMelo/static/aa4a59364e4265634f6377f361567450/410f3/Arq_Scraping_Fixed.png 561w\"\n        sizes=\"(max-width: 561px) 100vw, 561px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>This way, we have dedicated machines gathering listing URLs and sending them to a queue waiting to be requested. The URLs are then read, data is extracted via XPATH and stored in a new queue. In the last phase, the listings are validated, processed, and stored in an SQL database.</p>\n<h2>Backend</h2>\n<p>The backend is split into multiple microservices which communicate with the exterior via REST or between themselves via Kafka.</p>\n<ol>\n<li><strong>Auth</strong> — Responsible for authentication of the user with the platform, also responsible for the management of API keys to access the API Gateway.</li>\n<li><strong>User</strong> — Managing user information.</li>\n<li><strong>Metrics</strong> — The index that quantifies the relation between the user needs and the 15-minute city concept.</li>\n<li><strong>Parameter</strong> — Responsible for storing information related to points of interest of the multiple locations (e.g., gardens, hospitals, cinema).</li>\n<li><strong>Search</strong> — Logic behind the search bar, it uses Elastic Search for faster text retrieval.</li>\n<li><strong>Estate</strong> — Deals with all the estate information scraped in the previous step, as such, it shares the same database. </li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/LeonardoMelo/static/2567bd03c2f5a8c0341f141d9f9fd6d5/ae6b7/Tese_Scrapper-Arq.%20Artigo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.810810810810814%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABV0lEQVQoz3WT666CQAyE9/2fzx+KKBdRSRRQQUBB6vmalCB6Ntns7tBOpxec/K1hGOTXMrwsS9ntdrLdbuV8Pkvf9/KfnzOwaRrxfV/SNNX36/UajSCoqkqJH4/HSMQ53yNh13VKxj6dTlIUhdxuNzVCVZIkGjDLso9gXwpNgaVR17UqgYw7ilCX57kGuV6viiGA0+7P51M5nKVnjtN0KAPkFgxHsPv9/oHxZrdtKw6A6KSzWCw0JchREsexLJdL/Y4xqdOY/X4/kl8uF/XFDpXucDhIEATqbOlEUSTr9VrCMFSMmvLebDaKQc7GjzcnQsaUfy2iT8fCamaLMs3HBxs3b/t0VKYYBNPuWllWq5WWhAZ+EVo00iEFjCw9mgPGaQG5e56nNaWWTIGb/xVEgcAW40OxWeAos7GC6Hg8aqOoL/gXIZFNPptRop7gjIa9IYaUH2E6m2+3m6KdAqRs6QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"test\"\n        title=\"test\"\n        src=\"/LeonardoMelo/static/2567bd03c2f5a8c0341f141d9f9fd6d5/fcda8/Tese_Scrapper-Arq.%20Artigo.png\"\n        srcset=\"/LeonardoMelo/static/2567bd03c2f5a8c0341f141d9f9fd6d5/12f09/Tese_Scrapper-Arq.%20Artigo.png 148w,\n/LeonardoMelo/static/2567bd03c2f5a8c0341f141d9f9fd6d5/e4a3f/Tese_Scrapper-Arq.%20Artigo.png 295w,\n/LeonardoMelo/static/2567bd03c2f5a8c0341f141d9f9fd6d5/fcda8/Tese_Scrapper-Arq.%20Artigo.png 590w,\n/LeonardoMelo/static/2567bd03c2f5a8c0341f141d9f9fd6d5/ae6b7/Tese_Scrapper-Arq.%20Artigo.png 655w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>To ensure that wellbeing of the services and guarantee a great user experience, all the services expose metrics constantly scraped by <a href=\"https://prometheus.io/\">Prometheus</a> and monitored in <a href=\"https://grafana.com/\">Grafana</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/LeonardoMelo/static/86bd71217ff3bc155d2c87f642711822/20c7b/grafana-dashboard.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABaklEQVQoz1VR2W7jMAz012+apO1if7FAkyZ1bV0kRepwx0peVhgIkjhDkcPpdDxv2+Z8yNmIcyJmzmpF1QDJ2IpZVS0IxYSo5KwgIzSdX/9CnCRk42wZqtbqtvVtLMlM2atxrdZqATqivQ306e39H0g/bo4S0xNJVEaiQpzm5bL6mwv3mBYiR7QyuRSXnGk6nd8hZmJTq7UXZK9N93K1lFpqq63LXnvD+YEkUsZ1Op5eIUavhbn1bWdbyT4YUR3U1rbAcc/U+nipnsIj73R42Q0LHFhhFP7QnT6aBqpJM98sNg3VCMre9xR9rOfPLi4kkSTBRxWp8NfQcjFlST+ZFqW1aKr/r+nP4bT3zALyXhXqKW0IcUAHzUrPWrAXOIKmKq5Pd6bDmDPIqBaVYKhjusQaMTw4/+1vwM1dHTmTIOHC4cr+U9lPx/MbxD54lmGxig/fDzD7xPE2XxZ3X/wdfYV1nr8+1vkKcPK/V504y1V/BOgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"test\"\n        title=\"test\"\n        src=\"/LeonardoMelo/static/86bd71217ff3bc155d2c87f642711822/fcda8/grafana-dashboard.png\"\n        srcset=\"/LeonardoMelo/static/86bd71217ff3bc155d2c87f642711822/12f09/grafana-dashboard.png 148w,\n/LeonardoMelo/static/86bd71217ff3bc155d2c87f642711822/e4a3f/grafana-dashboard.png 295w,\n/LeonardoMelo/static/86bd71217ff3bc155d2c87f642711822/fcda8/grafana-dashboard.png 590w,\n/LeonardoMelo/static/86bd71217ff3bc155d2c87f642711822/efc66/grafana-dashboard.png 885w,\n/LeonardoMelo/static/86bd71217ff3bc155d2c87f642711822/c83ae/grafana-dashboard.png 1180w,\n/LeonardoMelo/static/86bd71217ff3bc155d2c87f642711822/20c7b/grafana-dashboard.png 2891w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Frontend</h2>\n<p>The frontend was created with <a href=\"https://reactjs.org/\">ReactJS</a>, and is <strong>still under development</strong>. Currently the product page displays information about the chosen location, such as: type (municipality, parish, city, NUT), average price, index value according to the 15 minute city concept.</p>\n<p>The second section displays all the available estates in the chosen location. And finally, some information about the estates present in the area: most common features and bedrooms per house (the portuguese way of listing estates).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/LeonardoMelo/static/0d5dc143b6322543ba4a2722bcd5988e/46115/ui_placeholder_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACa0lEQVQoz0VTa3PaMBD0//8vMFMCBie0MGnaDElpPrRNCyEPwMhPybbkty3clTxtdvTBuru9PZ/XhkgzLlIpzzhNK3Gtm6a/4oQsJq7XStlny6r+n8Ixqqqq6z4km6ZFun2HFFmWcN5qNrJ13UgNHZBGXpQiTSEOzUSkZVkpFY1eEAdkfRSavqvmG2FIgyAgxPF933XdEHca3q1uHx7W5HRC0LbtKIp4kjBKIwWGGhXh3AjC0PM8WwNkxth6fTccDgeD4Zeba891HcdBP0ZZHMeKyhjEwMfVoJSeNFBECEFuu/kzv5xb1uXUNGfm7H51j5ne3l57MtDPqMi+HxyPR5CPGmiBdoHvWTPLNKcXo/FkPF0uPl1ZFjnZKbbDOQRQo8gYAITD4fCqcTjsMdXL886cTKfTmWmak5E1+jBZfFygY5Zl4IOWJAnEDb0hitcmGhghimOHnJbLBWTRYHxh3lx/xqhgCIFvl4EMfeI4Rr863PGAin4laPy03YxGo/n8arfb+r6HILJlUeR5Dib0ETEYUzuAE7DQQPEDBHDA//34uN/vCxhBqFJwsjzHS6EL1o+va3AuIExZVMN+XdfCFbCHxvncwTnozoXAcwsftg28Aqs1jTKL0dsFLYvNY3b/tVyvZBx1wFkZFn6Ep9Cv7aTjPO9//IyyRiVVRWecdRGLYrG6iceDZDyoNr/OiquMCdunPEGdI2w3fQ2TcrV1u39QZIhj4dm32/Tygl+N86XVkKPMU6lU27oqUZfWyVO4+/5Cn0j0row3BR/jlTSsfLfw3IzYBbFL36urSmc7jIDSKM1PVPT/TP/D/AUdKnT+veKQkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"test\"\n        title=\"test\"\n        src=\"/LeonardoMelo/static/0d5dc143b6322543ba4a2722bcd5988e/fcda8/ui_placeholder_2.png\"\n        srcset=\"/LeonardoMelo/static/0d5dc143b6322543ba4a2722bcd5988e/12f09/ui_placeholder_2.png 148w,\n/LeonardoMelo/static/0d5dc143b6322543ba4a2722bcd5988e/e4a3f/ui_placeholder_2.png 295w,\n/LeonardoMelo/static/0d5dc143b6322543ba4a2722bcd5988e/fcda8/ui_placeholder_2.png 590w,\n/LeonardoMelo/static/0d5dc143b6322543ba4a2722bcd5988e/efc66/ui_placeholder_2.png 885w,\n/LeonardoMelo/static/0d5dc143b6322543ba4a2722bcd5988e/c83ae/ui_placeholder_2.png 1180w,\n/LeonardoMelo/static/0d5dc143b6322543ba4a2722bcd5988e/46115/ui_placeholder_2.png 1290w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"15 Minute City","date":"August 18, 2021","description":"A new way of discovering real estate through the 15-Minute City concept.","time":null,"stack":["Kubernetes","Docker","Spring Boot","Prometheus","Grafana","MongoDB","PostgreSQL","PostGIS","AWS DyanmoDB","AWS Cognito","Elastic Search","Redis","Java","Python","NGINX","React","Leaflet","MapBox"]}}},"pageContext":{"slug":"/15-minute-city/"}},"staticQueryHashes":["3649515864","63159454"]}